<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Hot Sauce List</title>
    <link rel="stylesheet" href="css/hotsauce.css" />
   
  </head>
  <body>

    <!-- Application div -->
    <div id="application"></div>

    <script src="https://fb.me/react-15.1.0.min.js"></script>
    <script src="https://fb.me/react-dom-15.1.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.24/browser.min.js"></script>
    <script type="text/babel">
      /*
        We have provided you with sample application code to get you running. We encourage you to change this in any way you would like in order to complete the test. Any additional JavaScript can be placed in here.

        We do recommend you write all the code here because of cross orgigin scripting issues. If you do want to place this code in a seperate file, it will require you use a server environment and access this page via http://localhost/HostSauceTest/ or something similar.
      */

      var Application = React.createClass({
        render: function() {
          return (
            <p>
              Hello applicant!
            </p>
          );
        }
      });

      ReactDOM.render(
        <Application />,

        document.getElementById('application')
      );

      var Hotlist = React.createClass({
        getInitialState: function() {
          return {data: []};
        },

        getJSON: function (callback) {
          var xhr = new XMLHttpRequest();
          xhr.open('GET', 'hotsauces.json', true);
          xhr.onreadystatechange = function() {
            if (xhr.readyState == 4 && xhr.status === 200) { 
              callback.apply(xhr)
              var parseList = JSON.parse(xhr.responseText);
              var sauces = parseList['list'];
              this.setState({data: sauces});
            }  
          }.bind(this)
          xhr.send();
        },

        componentDidMount: function(){
          this.getJSON(
            function() {
              return JSON.parse(this.responseText);
            }
          );  
        },  

        render: function() {
          return (
            <div>
              <h1>Hotsauce</h1>
              {this.state.data.map(function(sauce) {
                return <div>
                          <h3>{sauce.title}</h3>
                          <h5>{sauce.subtitle}</h5>
                          <h5>{sauce.description}</h5>
                          <img src={sauce.imageURL} alt="hotsauce pic"/>
                        </div>
              })}
            </div>
          )
        }
      });

      ReactDOM.render(
        <Hotlist />,

        document.getElementById('application')
      );
    </script>
  </body>
</html>
